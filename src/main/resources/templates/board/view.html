<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/common :: head('JAYCODER NET - 강좌 게시판')">
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous" />
    <link href="starter-template.css" th:href="@{/starter-template.css}" rel="stylesheet" />
    <title>JAYCODER NET - 강좌 게시판</title>
</head>

<body>
    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top" th:replace="fragments/common :: menu('board')">
    </nav>
    <div class="container">
        <h2>강좌 게시판</h2>
        <form role="form" class="my-2" th:action="@{/board/form/{id}(id=${board.id})}" th:object="${board}"
            th:method="delete">
            <div class="card" style="width: 100%;">
                <div class="card-body">
                    <h5 class="card-title" th:text="*{title}">Card title</h5>
                    <!--h6 class="card-subtitle mb-2 text-muted" th:text="*{user.username}">Card subtitle</h6-->
                    <ul class="list-inline card-subtitle mb-2 text-muted">
                        <li class="list-inline-item" th:text="|작성자 : *{user.username}|">Lorem ipsum</li>
                        <li class="list-inline-item" th:with="date=*{createdate}" th:text="|등록일 : ${#dates.format(date, 'yyyy.MM.dd HH:mm')}|">Phasellus iaculis</li>
                        <li class="list-inline-item" th:text="|조회수 : *{hit}|">Nulla volutpat</li>
                      </ul>                    
                    <p class="card-text" th:text="*{content}">Some quick example text to build on the card title and
                        make up the bulk of the card's content.</p>
                </div>
            </div>
            <div class="text-right">
                <!--  #strings.equals(#authentication.name, second)  -->
                <a class="btn btn-secondary" th:href="@{/board/list}">목록</a>
                <a th:if="${#authentication.name} == ${board.user.username}"  class="btn btn-warning" th:href="@{/board/form(id=${board.id})}">수정</a>
                <button th:if="${#authentication.name} == ${board.user.username}" type="submit"  class="btn btn-danger">삭제</button>
            </div>                        
        </form>
        
        <div class="card board-comment-articles" style="width: 100%;">
            <div><strong>2개의 의견</strong></div>
            <article class="article">
                <div th:each="reply : ${board.replys}" class="card-body">
                    <h5 th:text="${reply.user.username}" class="card-title">홍길동</h5>
                    <h6 th:text="${reply.createdate}" class="card-subtitle mb-2 text-muted">2020.11.20</h6>
                    <p th:text="${reply.content}" class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                    <a class="card-link link-modify-article" th:href="@{/api/reply/{replyid}/updateReply(replyid=${reply.id})}">수정</a>
                    <a class="card-link link-delete-article" th:href="@{/api/board/{replyid}/reply(replyid=${reply.id})}">삭제</a>                    
                    <!--form  th:action="@{'/api/board/'+${reply.board.Id}+'/reply/'+${reply.id}}" method="POST">
                        <input type="hidden" name="_method" value="DELETE">
                        <button type="submit" class="btn btn-danger btn-sm">삭제</button>
                    </form-->
                </div>
            </article>
        </div>   
        <form role="form" class="reply_write" th:object="${board}" th:action="@{/api/board/{id}/replys(id=${board.id})}" method="post">
            <div class="form-group">
                <textarea class="form-control mb-1" id="content" name="content" placeholder="댓글을 입력해주세요." rows="3"></textarea>
                <input type="submit" class="btn btn-success btn-lg btn-block" value="답변하기" />
              </div>              
        </form>    
     </div>

     <script type="text/template" id="replyTemplate">
        <article class="article">
            <div  class="card-body">
                <h5  class="card-title">{0}</h5>
                <h6  class="card-subtitle mb-2 text-muted">{1}</h6>
                <p  class="card-text">{2}</p>
                <a class="card-link link-modify-article" href="/api/reply/{3}/updateReply">수정</a>
                <a class="card-link link-delete-article" href="/api/board/{3}/reply">삭제</a>
                 <!--form class="delete-answer-form" action="/api/board/{3}/reply/4" method="POST">                   
                    <input type="hidden" name="_method" value="DELETE">
                     <button type="submit" class="btn btn-danger btn-sm">삭제</button>
                </form-->
              </div>            
        </article>
    </script>

    <div th:include="fragments/common :: foot">
        <!-- jQuery and Bootstrap Bundle (includes Popper), other js   -->
    </div>

</body>
</html>